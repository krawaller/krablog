
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Releasing Tristania fan app - Krawaller webdev blog</title>
  <meta name="author" content="Krawaller">

  
  <meta name="description" content="We are proud to announce the release of our latest creation; the official app for the magnificent metal band Tristania!&nbsp; [[posterous-content: &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://krawaller.github.com/krablog/releasing-tristania-fan-app/">
  <link href="/krablog/favicon.png" rel="icon">
  <link href="/krablog/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <script src="/krablog/javascripts/modernizr-2.0.js"></script>
  <script src="/krablog/javascripts/ender.js"></script>
  <script src="/krablog/javascripts/octopress.js" type="text/javascript"></script>
  <link href="/krablog/atom.xml" rel="alternate" title="Krawaller webdev blog" type="application/atom+xml">
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="http://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="http://fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">

  

</head>

<body   >
  <header role="banner"><hgroup>
  <h1><a href="/krablog/">Krawaller webdev blog</a></h1>
  
    <h2>Musings on programming in general and JavaScript in particular</h2>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/krablog/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="http://google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:krawaller.github.com/krablog" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/krablog/">Blog</a></li>
  <li><a href="/krablog/blog/archives">Archives</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div>
<article class="hentry" role="article">
  
  <header>
    
      <h1 class="entry-title">Releasing Tristania Fan App</h1>
    
    
      <p class="meta">
        








  


<time datetime="2010-10-21T00:00:00+02:00" pubdate data-updated="true">Oct 21<span>st</span>, 2010</time>
        
      </p>
    
  </header>


<div class="entry-content"><p>We are proud to announce the release of our latest creation; the official app for the magnificent metal band <a href="http://www.tristania.com" title="Tristania's official homepage" target="_blank">Tristania</a>!&nbsp;</p>
<p>[[posterous-content:cCIiuwqEGmfzemizpFzI]]</p>
<p>&nbsp;</p>
<h3>Features:</h3>
<p>To get a feel for the app, please peruse the screenshots below:</p>
<p>[[posterous-content:fvArwGHAovhlBCEobCwy]]</p>
<p>With the app you can follow Tristania&#8217;s various digital presences such as the official homepage, Twitter, Facebook, YouTube, gallery etc, from one convenient place. You&#8217;ll also find a comprehensive discography section with lyrics and band comments, as well as other related band information. Some discussion on the included features can be found in&nbsp;<a href="http://blog.krawaller.se/headbanging-with-yql" title="previous post" target="_self">this blog post</a>.</p>
<p>If you&#8217;re a Tristania fan you probably won&#8217;t want to read any further, as this blog focuses on the technical side of things. Instead you might want to head on over to <a href="http://theilluminated.net/your-work/tristania-iphone-app/" title="app thread on official Tristania forum" target="_blank">this thread</a> in the official forum, where you can discuss the app, tell us of bugs, etc. But, if you&#8217;re a nerd, read on!&nbsp;</p>
<h3>Used tools:</h3>
<p>Although it is unlikely that the average reader of this blog is unfamiliar with any of these JS-Ninja weaponry, here&#8217;s a quick rundown of the tools used when building the Tristania app. If any of the below is missing from your toolbox, definitely rectify right away!</p>
<h4>Titanium</h4>
<p>As usual we built the application using <a href="http://www.appcelerator.com/products/titanium-mobile-application-development/" title="Titanium mobile" target="_blank">Titanium</a>, so that we can program in the language we know and love (JavaScript, as opposed to Objective C), yet still deploy it as a native application.&nbsp;</p>
<p>Although little brother has extensive experience with Titanium by now, this was my first &#8220;serious&#8221; deep-dive into the framework. Here are some of the lessons learnt during that journey:</p>
<ul>
<li>The emulator is not to be trusted, you need to <strong>make regular sanity checks on an actual device</strong>. In particular, what the emulator will not emulate is lag when a table / webview / somedetailedobject is rendered on the phone. Several times we had to refactor our code, when real-life tests revealed a certain solution to be too slow, in spite of split-second rendering in the emulator.</li>
<li>F<strong>requently delete everything in the build directory</strong>. Yes, this means that you have to perform a full rebuild to test the next iteration, which some extra takes time. But you will save yourself from hugely annoying bug hunts caused by Titanium erroneously keeping old settings in the build. Take extra care to flush build before building to the device, and definitely flush <strong>thrice</strong> before packaging for upload to app store.&nbsp;</li>
<li>Just <strong>ignore the official documentation</strong> completely. It is nowhere near complete, and full of half-truths and outright lies. Rely instead on the Kitchen Sink code. While not exactly a shining example of best practices, it has working examples of pretty much everything. When that fails, check the <a href="http://github.com/appcelerator/titanium_mobile" title="Titanium source code" target="_blank">source code</a> of Titanium itself. Also the FAQ discussion on the official homepage is a good resource.</li>
<li>Titanium is still a <strong>beta-ish platform</strong>, and sometimes the boat will be rocking for no fault of yours. But, it is getting more stable by each release, and being able to code native apps in beautiful JavaScript is worth the frustration.&nbsp;</li>
<li>The API is <strong>very low-level</strong>, as it should be. So for a large application you definitely need some kind of library to keep you sane, lest you have to type out lots of very verbose code everytime you want to create some non-trivial element. We adressed this through a little library of our own, which is slowly making its way to maturity. Especially with the <a href="http://developer.appcelerator.com/blog/2010/10/appcelerator-announces-9m-in-funding-paypal-partnership.html" title="Titanium blog" target="_blank">added investment just announced today</a>, things are only going to get better!&nbsp;</li>
</ul>
<p>Now, misunderstand me correctly - in spite of the whiny tone of the above notes, I still feel that Titanium is a remarkable framework, and that it is definitely heading in the right direction.&nbsp;</p>
<ul>
</ul>
<h4>YQL</h4>
<p>Yahoo&#8217;s web service to transform any online data into beautiful JSON is nothing short of brilliant. I already sang the praise of this service in the <a href="http://blog.krawaller.se/headbanging-with-yql" title="last post" target="_blank">in-progress post</a>, so shall not reiterate that here. The main point for us was to be able to isolate fragile scraping logic outside the application, in a YQL OpenTable. Should the site we scrape change its markup, we just update the table, and all apps will instantly work again. Also, being able to pass pure JSON back to the app is wonderful, making for a beautiful separation of concerns.&nbsp;</p>
<h4>CouchOne</h4>
<p>This is another road that little brother paved for me, as he has used CouchDB in both <a href="http://blog.krawaller.se/krawaller-proudly-presents-golingo" title="Golingo release post" target="_blank">Golingo</a> and <a href="http://blog.krawaller.se/systemet" title="Systemet release post" target="_blank">Systemet</a>. For me, however, it was a completely new experience.</p>
<p>[[posterous-content:FaoDhnxvvjBnFzBBzryB]]</p>
<p>What&#8217;s special about CouchDB is not just that it&#8217;s all JavaScript emitting JSON (which in and of itself is really cool), but it is a (for me) whole new way to think about data. The veterans among you are probably wrinkling your noses over us youngsters never having heard of MapReduce before, but somehow I&#8217;ve managed to completely miss this database approach. In a MapReduce database, data isn&#8217;t&nbsp;organized&nbsp;in tables. Instead it is all &#8220;documents&#8221;, meaning a simple object of key-value pairs. Here, for instance, is a user document from the Tristania database:</p>
<script src="http://gist.github.com/638246.js?file=document.js"></script>
<p>Since there are no tables, you cannot simply &#8220;SELECT * FROM Users&#8221;. Instead, you program a &#8220;view&#8221;, using JavaScript. Every document will be sent as an argument to a &#8220;Map&#8221; function, where you choose what to emit to the result set. The result will be a JSON object with a rows array, containing all the emitted objects. Here is the map function from the users view:</p>
<script src="http://gist.github.com/638246.js?file=community.js"></script>
<p>This might sound wasteful - so we have to go through all our data, even though we&#8217;re only interested in a particular well-defined subset? Somehow, however, CouchDB mitigates this, due to the way the data is stored on disc. It also remembers the result of passing a certain document to a certain map function, making the database every bit as fast and resilient as its table-based counterpart.</p>
<p>Another view in the Tristania app is the Statistics view, which also uses the Reduce function to return a single, aggregate object:</p>
<script src="http://gist.github.com/638246.js?file=statistics.js"></script>
<p>The result the same JSON structure as before, but the rows array now has only one value:</p>
<script src="http://gist.github.com/638246.js?file=result.js"></script>
<p>Still early days for the app, so as you can see above, it needs a lot more votes for the statistics data to be meaningful.</p>
<p>As with the notes on YQL etc, this isn&#8217;t meant to be a CouchDB primer, but merely a way to wet your appetite if you still haven&#8217;t made its acquaintance.&nbsp;</p>
<h4>GitHub</h4>
<p>So here we are definitely preaching to the choir, but I just wanted to put it to protocol that without Github, we never would have made it. We&#8217;re situated in different parts of Sweden, and have been working in parallell on different parts of the application. Here&#8217;s a snapshot of our Github app Network graph, showing our intertwined commits:&nbsp;</p>
<p>[[posterous-content:sEjFvonyyFjxxFHIsgHB]]</p>
<p>In our horrid pre-using-version-control days, we never could have pulled this off. Github for president!</p>
<h3>PS</h3>
<p>And, we know we&#8217;ve said it before, but it cannot be said too many times - go buy Rubicon, Tristania&#8217;s new album! Now! :)</p>
</div>


  <footer>
    <p class="meta">
      
  

<span class="byline author vcard">Posted by <span class="fn">David</span></span>

      








  


<time datetime="2010-10-21T00:00:00+02:00" pubdate data-updated="true">Oct 21<span>st</span>, 2010</time>
      

<span class="categories">
  
    <a class='category' href='/krablog/categories/couchone/'>couchone</a>, <a class='category' href='/krablog/categories/github/'>github</a>, <a class='category' href='/krablog/categories/titanium/'>titanium</a>, <a class='category' href='/krablog/categories/tristania/'>tristania</a>, <a class='category' href='/krablog/categories/yql/'>yql</a>
  
</span>


    </p>
    
      <div class="sharing">
  
  <a href="http://twitter.com/share" class="twitter-share-button" data-url="http://krawaller.github.com/krablog/releasing-tristania-fan-app/" data-via="krawaller" data-counturl="http://krawaller.github.com/krablog/releasing-tristania-fan-app/" >Tweet</a>
  
  
  
</div>

    
    <p class="meta">
      
        <a class="basic-alignment left" href="/krablog/book-review-javascript-patterns/" title="Previous Post: Book review - JavaScript Patterns">&laquo; Book review - JavaScript Patterns</a>
      
      
        <a class="basic-alignment right" href="/krablog/livetanium/" title="Next Post: Livetanium">Livetanium &raquo;</a>
      
    </p>
  </footer>
</article>

</div>

<aside class="sidebar">
  
    <section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/krablog/testing-backbone-objects/">Testing Backbone Objects</a>
      </li>
    
      <li class="post">
        <a href="/krablog/slides-form-sfis-talk-october-2012/">Slides form SFIS talk October 2012</a>
      </li>
    
      <li class="post">
        <a href="/krablog/software-passion/">Software Passion</a>
      </li>
    
      <li class="post">
        <a href="/krablog/coffeescript-overview-and-resource-inventory/">CoffeeScript overview and resource inventory</a>
      </li>
    
      <li class="post">
        <a href="/krablog/krawaller-real-life-appearances/">Krawaller real-life appearances</a>
      </li>
    
  </ul>
</section>
<section>
	<h1>Categories</h1>
	<ul id="category-list"><li><a href='http://krawaller.github.com/krablog/categories/auktionera'>auktionera (1)</a></li><li><a href='http://krawaller.github.com/krablog/categories/backbone'>Backbone (1)</a></li><li><a href='http://krawaller.github.com/krablog/categories/coffeescript'>coffeescript (2)</a></li><li><a href='http://krawaller.github.com/krablog/categories/couchone'>couchone (1)</a></li><li><a href='http://krawaller.github.com/krablog/categories/development'>development (12)</a></li><li><a href='http://krawaller.github.com/krablog/categories/github'>github (2)</a></li><li><a href='http://krawaller.github.com/krablog/categories/golingo'>golingo (3)</a></li><li><a href='http://krawaller.github.com/krablog/categories/instaviz'>instaviz (1)</a></li><li><a href='http://krawaller.github.com/krablog/categories/ipad'>ipad (1)</a></li><li><a href='http://krawaller.github.com/krablog/categories/ithoughts'>ithoughts (1)</a></li><li><a href='http://krawaller.github.com/krablog/categories/jasmine'>Jasmine (1)</a></li><li><a href='http://krawaller.github.com/krablog/categories/kranium'>kranium (2)</a></li><li><a href='http://krawaller.github.com/krablog/categories/labyrinth'>labyrinth (3)</a></li><li><a href='http://krawaller.github.com/krablog/categories/livetanium'>livetanium (1)</a></li><li><a href='http://krawaller.github.com/krablog/categories/mobilesafari'>mobilesafari (1)</a></li><li><a href='http://krawaller.github.com/krablog/categories/nodejs'>nodejs (1)</a></li><li><a href='http://krawaller.github.com/krablog/categories/omnigraffle'>omnigraffle (1)</a></li><li><a href='http://krawaller.github.com/krablog/categories/promotejs'>promotejs (1)</a></li><li><a href='http://krawaller.github.com/krablog/categories/review'>review (5)</a></li><li><a href='http://krawaller.github.com/krablog/categories/ria-university-course'>RIA_university_course (2)</a></li><li><a href='http://krawaller.github.com/krablog/categories/sinon'>Sinon (1)</a></li><li><a href='http://krawaller.github.com/krablog/categories/struct'>struct (1)</a></li><li><a href='http://krawaller.github.com/krablog/categories/systemet'>systemet (1)</a></li><li><a href='http://krawaller.github.com/krablog/categories/talk'>talk (3)</a></li><li><a href='http://krawaller.github.com/krablog/categories/testing'>Testing (1)</a></li><li><a href='http://krawaller.github.com/krablog/categories/titanium'>titanium (10)</a></li><li><a href='http://krawaller.github.com/krablog/categories/tiview'>tiview (1)</a></li><li><a href='http://krawaller.github.com/krablog/categories/tradera'>tradera (1)</a></li><li><a href='http://krawaller.github.com/krablog/categories/travelhack'>travelhack (1)</a></li><li><a href='http://krawaller.github.com/krablog/categories/tristania'>tristania (2)</a></li><li><a href='http://krawaller.github.com/krablog/categories/tweetanium'>tweetanium (1)</a></li><li><a href='http://krawaller.github.com/krablog/categories/txtv'>txtv (1)</a></li><li><a href='http://krawaller.github.com/krablog/categories/yql'>yql (3)</a></li></ul>
</section>
<section>
  <h1>Latest Tweets</h1>
  <ul id="tweets">
    <li class="loading">Status updating...</li>
  </ul>
  <script type="text/javascript">
    $.domReady(function(){
      getTwitterFeed("krawaller", 4, false);
    });
  </script>
  <script src="/krablog/javascripts/twitter.js" type="text/javascript"> </script>
  
    <a href="http://twitter.com/krawaller" class="twitter-follow-button" data-show-count="false">Follow @krawaller</a>
  
</section>


  
</aside>


    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2013 - Krawaller -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
  

<script type="text/javascript">
      var disqus_shortname = 'krawaller';
      
        
        var disqus_script = 'count.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = 'http://' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>







  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = 'http://platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





</body>
</html>
